var proflowgui=function(t){"use strict";var e={};function r(t,r){var n=t?r.source.x:r.target.x,a=t?r.source.y:r.target.y,i=t?r.target.x:r.source.x,o=t?r.target.y:r.source.y,c=i-n,s=o-a,d=Math.sqrt(c*c+s*s),u=t?0:1,l=(c=r.target.x-r.source.x,s=r.target.y-r.source.y,d=Math.sqrt(c*c+s*s),e[r.source.id+","+r.target.id]||e[r.target.id+","+r.source.id]);return l>1&&(d/=1+1/l*(r.linkindex-1-u)),"M"+n+","+a+"A"+d+", "+d+" 0, 0, "+u+" "+i+","+o}var n,a,i,o=d3.scaleOrdinal(d3.schemeCategory10),c=d3.select("svg"),s=+c.attr("width"),d=+c.attr("height");c.append("defs").append("marker").attrs({id:"arrowhead",viewBox:"-0 -5 10 10",refX:13,refY:0,orient:"auto",markerWidth:13,markerHeight:13,xoverflow:"visible"}).append("svg:path").attr("d","M 0,-5 L 10 ,0 L 0,5").attr("fill","#999").style("stroke","none");var u=d3.forceSimulation().force("link",d3.forceLink().id((function(t){return t.id})).distance(500).strength(.5)).force("charge",d3.forceManyBody()).force("center",d3.forceCenter(s/2,d/2));function l(){a.attr("d",(function(t){return r(!0,t)})),i.attr("d",(function(t){return r(t.source.x<t.target.x,t)})),n.attr("transform",(function(t){return"translate("+t.x+", "+t.y+")"}))}function f(t){d3.event.active||u.alphaTarget(.02).restart(),t.fx=t.x,t.fy=t.y}function g(t){t.fx=d3.event.x,t.fy=d3.event.y}return d3.json("/data/force.json",(function(t,r){if(t)throw t;var s,d,p=r.links;p.sort((function(t,e){return t.source>e.source?1:t.source<e.source?-1:t.target>e.target?1:t.target<e.target?-1:0})),function(t){for(var r=0;r<t.length;r++)0!=r&&t[r].source==t[r-1].source&&t[r].target==t[r-1].target?t[r].linkindex=t[r-1].linkindex+1:t[r].linkindex=1,void 0!==e[t[r].target+","+t[r].source]?e[t[r].target+","+t[r].source]=t[r].linkindex:e[t[r].source+","+t[r].target]=t[r].linkindex}(p),s=p,d=r.nodes,(a=c.selectAll(".link").data(s).enter().append("svg:path").attr("class","link").attr("marker-end","url(#arrowhead)")).append("title").text((function(t){return t.name})),i=c.selectAll(".pathInvis").data(s).enter().append("svg:path").attr("id",(function(t){return"invis_"+t.source+"-"+t.linkindex+"-"+t.target})).attr("class","pathInvis"),c.selectAll(".pathLabel").data(s).enter().append("svg:text").attr("class","pathLabel").attr("text-anchor","middle").append("svg:textPath").attr("startOffset","50%").attr("xlink:href",(function(t){return"#invis_"+t.source+"-"+t.linkindex+"-"+t.target})).style("fill","#cccccc").style("font-size",10).text((function(t){return t.name})),(n=c.selectAll(".node").data(d).enter().append("g").attr("class","node").call(d3.drag().on("start",f).on("drag",g))).append("circle").attr("r",5).style("fill",(function(t,e){return o(e)})),n.append("title").text((function(t){return t.id})),n.append("text").attr("dy",-3).text((function(t){return t.name+":"+t.text})),u.nodes(d).on("tick",l),u.force("link").links(s)})),t.sortLinks=function(t){t.sort((function(t,e){return t.source>e.source?1:t.source<e.source?-1:t.target>e.target?1:t.target<e.target?-1:0}))},t}({});
